---
---

<div id="summaryDrawer" class="fixed my-5 border-foreground/20 border-1 border-solid rounded-xl top-16 right-0 bottom-0 w-0 md:w-96 bg-background shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out overflow-y-auto z-50">
  <div class="p-4 h-full flex flex-col">
    <div class="flex justify-between items-center mb-4 sticky top-0 z-10 py-2">
      <h2 class="text-xl font-bold">Summary</h2>
      <button aria-label="Close summary drawer" id="closeDrawer" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
    <div class="flex-grow overflow-y-auto prose prose-headings:text-foreground prose-p:text-foreground prose-a:text-sky-700 dark:prose-a:text-fuchsia-600 prose-code:text-sky-700 dark:prose-code:text-fuchsia-500 prose-ul:text-foreground prose-strong:text-foreground prose-strong:font-semibold prose-figcaption:text-foreground">
      <!-- Pulsing Cursor Loader -->
      <div id="skeletonLoader" class="flex items-center justify-center h-full">
        <div class="w-3 h-3 bg-sky-700 dark:bg-fuchsia-700 rounded-full animate-pulse"></div>
      </div>
      <div id="summaryContent"></div>
      <!-- Pulsing cursor for content addition -->
      <div id="pulsingCursor" class="hidden">
        <span class="inline-block w-2 h-4 bg-sky-700 dark:bg-fuchsia-700 animate-pulse"></span>
      </div>
    </div>
  </div>
</div>

<script>
  const drawer = document.getElementById('summaryDrawer') as HTMLElement | null;
  const closeButton = document.getElementById('closeDrawer') as HTMLButtonElement | null;

  const closeDrawer = () => {
    if (drawer) {
      drawer.classList.add('translate-x-full');
      drawer.classList.remove('right-5');
      drawer.classList.add('right-0');
      drawer.classList.remove('w-96');
    }
  };

  closeButton?.addEventListener('click', closeDrawer);

  document.addEventListener('keydown', (event: KeyboardEvent) => {
    if (event.key === 'Escape') {
      closeDrawer();
    }
  });
</script>

<style>
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  #pulsingCursor span {
    animation: blink 0.7s infinite;
  }
</style>
